(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),s=(n(89),n(78)),i=n(14),l=n(11),u=n.n(l),d=n(19),j=n(12),b=n(13),p=n.n(b),h=n(2),f=Object(a.createContext)(),O=function(e){var t=Object(a.useState)(void 0),n=Object(j.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(void 0),s=Object(j.a)(o,2),i=s[0],l=s[1];function b(){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/user/get_loggedin_user",{withCredentials:!0});case 3:"success"===(t=e.sent).data.status?(c(!0),l(t.data.user)):c(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c(!1),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(a.useEffect)((function(){b()}),[]);var x={loggedIn:r,currentUser:i,getLoggedInState:b};return Object(h.jsx)(f.Provider,{value:x,children:e.children})},x=f,g=n(160),m=n(161),v=n(152),y=n(155),S=n(157),C=Object(v.a)({field:{marginTop:20,marginBottom:20,display:"block"},formCard:{marginTop:"100px"}}),k=function(){var e=C(),t=Object(a.useState)(""),n=Object(j.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),s=Object(j.a)(o,2),l=s[0],b=s[1],f=Object(a.useState)(""),O=Object(j.a)(f,2),v=O[0],k=O[1],w=Object(a.useState)(""),N=Object(j.a)(w,2),T=N[0],I=N[1],B=Object(a.useState)(""),_=Object(j.a)(B,2),F=_[0],R=_[1],q=Object(a.useState)(""),W=Object(j.a)(q,2),L=W[0],E=W[1],P=Object(a.useContext)(x).loggedIn,D=Object(i.f)();return Object(h.jsxs)("div",{className:e.formCard,children:[P?Object(h.jsx)(i.a,{to:"/dashboard"}):null,L?Object(h.jsxs)("div",{style:{border:"1px solid red",width:"60%",height:"fit-content",textAlign:"center",margin:"auto",marginBottom:"20px",display:"flex",alignItem:"center",justifyContent:"center",fontSize:"1.5rem",borderRadius:"10px"},children:[" ",Object(h.jsx)("p",{style:{display:"inline-block"},children:L})," "]}):null,Object(h.jsxs)(y.a,{children:[Object(h.jsx)(S.a,{variant:"h4",color:"textSecondary",gutterBottom:!0,children:"SignUp"}),Object(h.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(){var e={first_name:r,last_name:l,phone_number:v,email:T,password:F};function t(){return(t=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/api/getcsrf",{withCredentials:!0});case 3:return n=t.sent,a=n.headers["x-csrftoken"],t.next=7,p.a.post("/user/signup",e,{headers:{"X-CSRFToken":a}});case 7:"success"===t.sent.data.status&&D.push({pathname:"/login"}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),E(t.t0.response.data.message),console.log(t.t0.response);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}()},children:[Object(h.jsx)(g.a,{onChange:function(e){c(e.target.value)},className:e.field,label:"First Name",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(g.a,{onChange:function(e){b(e.target.value)},className:e.field,label:"Last Name",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(g.a,{onChange:function(e){k(e.target.value)},type:"number",className:e.field,label:"Phone",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(g.a,{onChange:function(e){I(e.target.value)},type:"email",className:e.field,label:"Email",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(g.a,{onChange:function(e){R(e.target.value)},type:"password",className:e.field,label:"Password",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(m.a,{type:"submit",className:e.btn,variant:"contained",color:"secondary",disabled:!T||!F,children:"Submit"})]})]})]})},w=Object(v.a)({field:{marginTop:20,marginBottom:20,display:"block"},formCard:{marginTop:"100px"}}),N=function(){var e=w(),t=Object(a.useState)(""),n=Object(j.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),s=Object(j.a)(o,2),l=s[0],b=s[1],f=Object(a.useState)(""),O=Object(j.a)(f,2),v=O[0],C=O[1],k=Object(a.useContext)(x),N=k.loggedIn,T=k.getLoggedInState,I=Object(i.f)();return Object(h.jsxs)("div",{className:e.formCard,children:[N?Object(h.jsx)(i.a,{to:"/dashboard"}):null,v?Object(h.jsxs)("div",{style:{border:"1px solid red",width:"60%",height:"fit-content",textAlign:"center",margin:"auto",marginBottom:"20px",display:"flex",alignItem:"center",justifyContent:"center",fontSize:"1.5rem",borderRadius:"10px"},children:[" ",Object(h.jsx)("p",{style:{display:"inline-block"},children:v})," "]}):null,Object(h.jsxs)(y.a,{children:[Object(h.jsx)(S.a,{variant:"h4",color:"textSecondary",gutterBottom:!0,children:"Login"}),Object(h.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(){var e={email:r,password:l};function t(){return(t=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/api/getcsrf",{withCredentials:!0});case 3:return n=t.sent,a=n.headers["x-csrftoken"],t.next=7,p.a.post("/user/login",e,{headers:{"X-CSRFToken":a}});case 7:T(),I.push("/dashboard"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),C(t.t0.response.data.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}()},children:[Object(h.jsx)(g.a,{onChange:function(e){c(e.target.value)},type:"email",className:e.field,label:"Email",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(g.a,{onChange:function(e){b(e.target.value)},type:"password",className:e.field,label:"Password",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(m.a,{type:"submit",className:e.btn,variant:"contained",color:"secondary",disabled:!r||!l,children:"Submit"})]})]})]})},T=function(){var e=Object(a.useContext)(x),t=e.getLoggedInState,n=e.loggedIn;return Object(a.useEffect)((function(){if(n){function e(){return(e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/logout");case 2:n=e.sent,console.log(n.data),t();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}}),[]),Object(h.jsxs)(h.Fragment,{children:[n?null:Object(h.jsx)(i.a,{to:"/login"}),Object(h.jsx)("h1",{children:"Logout"})]})};var I=function(){var e=Object(a.useContext)(x).loggedIn;return Object(h.jsx)(h.Fragment,{children:e?Object(h.jsx)("h1",{children:"Home"}):Object(h.jsx)(i.a,{to:"/login"})})},B=n(76),_=n.n(B),F=n(29),R=(n(71),Object(v.a)({field:{marginTop:20,marginBottom:20,display:"block"}}));F.a.configure();var q=function(){var e=R(),t=Object(a.useContext)(x).loggedIn,n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)([]),l=Object(j.a)(s,2),b=l[0],f=l[1],O=Object(a.useState)(""),v=Object(j.a)(O,2),C=v[0],k=v[1],w=Object(i.f)(),N=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/getcsrf",{withCredentials:!0});case 3:return t=e.sent,n=t.headers["x-csrftoken"],e.next=7,p.a.post("/api/notes",{title:c},{headers:{"X-CSRFToken":n}});case 7:a=e.sent,r=a.data.note._id.$oid,o="id=".concat(r),w.push({pathname:"/note",search:o}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.response),console.log(e.t0.response.data.msg),'Missing cookie "access_token_cookie"'===e.t0.response.data.msg&&k("User has logged out");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function T(){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/notes");case 2:t=e.sent,f(t.data.notes);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){T()}),[]),Object(h.jsxs)(h.Fragment,{children:[C?Object(h.jsx)(i.a,{to:"/error",message:C}):null,t?null:Object(h.jsx)(i.a,{to:"/login"}),Object(h.jsxs)(y.a,{children:[Object(h.jsx)(S.a,{variant:"h6",component:"h2",color:"textSecondary",gutterBottom:!0,children:"Create A New Note"}),Object(h.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),N()},children:[Object(h.jsx)(g.a,{onChange:function(e){o(e.target.value)},className:e.field,label:"Note Title",color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)(m.a,{type:"submit",variant:"contained",color:"secondary",children:"Submit"})]}),Object(h.jsx)(S.a,{variant:"h6",component:"h2",color:"textSecondary",gutterBottom:!0,style:{marginTop:"20px"},children:"Saved Notes"}),Object(h.jsx)("div",{children:b?b.map((function(e,t){return Object(h.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between"},children:[Object(h.jsx)(S.a,{variant:"h6",gutterBottom:!0,style:{cursor:"pointer",display:"inline-block"},onClick:function(){var t=e._id.$oid,n="id=".concat(t);w.push({pathname:"/note",search:n})},children:e.title}),Object(h.jsx)(_.a,{style:{fontSize:30,cursor:"pointer"},variant:"contained",color:"secondary",onClick:function(t){!function(e){function t(){return(t=Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/api/getcsrf",{withCredentials:!0});case 3:return n=t.sent,a=n.headers["x-csrftoken"],t.next=7,p.a.delete("/api/notes/".concat(e),{headers:{"X-CSRFToken":a}});case 7:"success"===t.sent.data.status&&(T(),F.a.error("Note Deleted!",{position:F.a.POSITION.BOTTOM_RIGHT,autoClose:3e3})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0.response);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}(e._id.$oid)}})]},t)})):null})]})]})},W=n(16),L=n(158),E=n(159),P=function(){var e=Object(a.useContext)(x).loggedIn;return Object(h.jsx)(y.a,{children:Object(h.jsx)(L.a,{children:Object(h.jsxs)(E.a,{children:[Object(h.jsx)(S.a,{variant:"h5",style:{flexGrow:1},children:Object(h.jsx)(m.a,{color:"inherit",component:W.b,to:"/dashboard",style:{transform:"scale(1.5)"},children:"Note IT"})}),e?null:Object(h.jsx)(m.a,{color:"inherit",component:W.b,to:"/signup",children:"Sign Up"}),e?null:Object(h.jsx)(m.a,{color:"inherit",component:W.b,to:"/login",children:"Log In"}),e?Object(h.jsx)(m.a,{color:"inherit",component:W.b,to:"/dashboard",children:"Dashboard"}):null,e?Object(h.jsx)(m.a,{color:"inherit",component:W.b,to:"/logout",children:"Log Out"}):null]})})})},D=n(77),X=Object(v.a)({field:{marginTop:20,marginBottom:20,display:"block"}});function U(e){var t,n,r=new URLSearchParams(e.location.search),c=Object(D.a)(r.entries());try{for(c.s();!(n=c.n()).done;){var o=n.value;"id"===o[0]&&(t=o[1])}}catch(_){c.e(_)}finally{c.f()}var s=X(),l=Object(a.useState)(t),b=Object(j.a)(l,1)[0],f=Object(a.useState)(""),O=Object(j.a)(f,2),v=O[0],C=O[1],k=Object(a.useState)(""),w=Object(j.a)(k,2),N=w[0],T=w[1],I=Object(i.f)(),B=Object(a.useContext)(x).loggedIn;Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/notes/".concat(b));case 2:t=e.sent,C(t.data.note.title),T(t.data.note.content);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(h.jsxs)(y.a,{children:[B?null:Object(h.jsx)(i.a,{to:"/login"}),Object(h.jsx)(S.a,{variant:"h6",component:"h2",color:"textSecondary",gutterBottom:!0,children:"Create A New Note"}),Object(h.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){return function(e){function t(){return(t=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/getcsrf",{withCredentials:!0});case 2:return t=e.sent,n=t.headers["x-csrftoken"],e.next=6,p.a.patch("/api/notes/".concat(b),{title:v,content:N},{headers:{"X-CSRFToken":n}});case 6:"success"===e.sent.data.status&&(I.push({pathname:"/dashboard"}),F.a.info("saved",{position:F.a.POSITION.BOTTOM_RIGHT,autoClose:3e3}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.preventDefault(),function(){t.apply(this,arguments)}()}(e)},children:[Object(h.jsx)("label",{children:"Note Title"}),Object(h.jsx)(g.a,{onChange:function(e){C(e.target.value)},className:s.field,value:v,color:"secondary",variant:"outlined",fullWidth:!0,required:!0}),Object(h.jsx)("label",{children:"Content"}),Object(h.jsx)(g.a,{onChange:function(e){T(e.target.value)},className:s.field,value:N,color:"secondary",variant:"outlined",fullWidth:!0,required:!0,multiline:!0,rows:4}),Object(h.jsx)(m.a,{type:"submit",className:s.btn,variant:"contained",color:"secondary",children:"Submit"})]})]})}F.a.configure();var A=function(e){var t=e.message?e.message:{message:""},n=Object(a.useState)(""),r=Object(j.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){t.message&&o(t.message)}),[]),Object(h.jsxs)(y.a,{children:[t.message?null:Object(h.jsx)(i.a,{to:"/dashboard"}),c?Object(h.jsx)(S.a,{variant:"h1",children:c}):null]})};var M=function(){var e=Object(a.useContext)(x),t=e.loggedIn,n=e.token;return p.a.defaults.headers.post["X-CSRFToken"]=n,Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(P,{}),Object(h.jsx)(i.b,{path:"/",component:I}),!0===t&&Object(h.jsx)(i.b,{path:"/dashboard",component:q}),Object(h.jsx)(i.b,{path:"/signup",component:k}),(!0===t||!1===t)&&Object(h.jsx)(i.b,{path:"/login",component:N}),(!0===t||!1===t)&&Object(h.jsx)(i.b,{path:"/note",component:U}),Object(h.jsx)(i.b,{path:"/error",render:function(e){return Object(h.jsx)(A,Object(s.a)({},e))}}),Object(h.jsx)(i.b,{path:"/logout",component:T})]})};o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(W.a,{children:Object(h.jsx)(O,{children:Object(h.jsx)(M,{})})})}),document.getElementById("root"))},89:function(e,t,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.4cc36227.chunk.js.map